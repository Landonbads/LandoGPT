{% extends "base.html"%} {% block title %}Dashboard{% endblock %}
{% block nav_dashboard %}<a class="nav-link" href="/" id="dashboard">Dashboard </a> {% endblock %}
{% block nav_buy_credits %} <a class="nav-link" href="#" id="buyCredits">Buy Credits</a> {% endblock %}
{% block nav_credit_balance %} <a class="nav-link" href="/" id="creditBalance">Balance: ${{credits}} </a> {% endblock %}
{% block nav_register_login %}<a class="nav-link" href="/logout" id="logout">Logout</a>{% endblock %}
{% block content %}

<br/>
<h1 align="center">Chat Dashboard</h1>
<div class="card" style="min-height: 30rem;">
  <div id="resposeContent" class="card-body">
    <div class="card-scroll">
      {% for message in messages %}
        <strong>{{message['role']}}:</strong> {{message['content']}} <br><br>
      {% endfor %}
    </div>
  </div>
</div>
<br/>
<form method="POST" id="chatForm">
  <textarea name="prompt" id="prompt" class="form-control" placeholder="Send your message here..."></textarea>
  <br />
  <input type="hidden" name="action" id="formAction" value="send_message">
  <div align="center">
    <!-- Send Message Button -->
    <button type="submit" id="sendButton" class="btn btn-primary">Send Message</button>
    
    <!-- Clear Conversation Button -->
    <button type="button" id="clearButton" class="btn btn-danger" onclick="clearConversation()">Clear Conversation</button>
  </div>
</form>

<script>
  function clearConversation() {
    document.getElementById('formAction').value = 'clear_messages';
    document.getElementById('chatForm').submit();
  }
</script>

 {% endblock %}